# Usar imagen oficial de Node.js basada en Alpine para ligereza
FROM node:18-alpine

# Establecer el directorio de trabajo
WORKDIR /app

# Copiar el archivo de configuración de npm
COPY package.json ./

# Instalar solo dependencias de producción
RUN npm install --production

# Copiar el servidor lógico de Node
COPY server.js .

# --- NOTA CRÍTICA PARA DOCKPLOY ---
# Para que estas líneas no fallen, los archivos 'index.html' y 'audit.html'
# DEBEN estar dentro de la carpeta /Node en tu repositorio de GitHub.
# Si están en la raíz del proyecto, el build fallará o no los encontrará.

COPY index.html ./index.html
COPY audit.html ./audit.html

# Exponer el puerto 80
EXPOSE 80

# Comando para iniciar el servidor
CMD ["npm", "start"]